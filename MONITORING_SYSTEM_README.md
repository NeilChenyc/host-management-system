# ğŸš¨ ç›‘æ§æŠ¥è­¦ç³»ç»Ÿ - æœ€å°å¯ç”¨ç‰ˆæœ¬

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäºSpring Bootçš„æœåŠ¡å™¨ç›‘æ§æŠ¥è­¦ç³»ç»Ÿï¼Œå®ç°äº†ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š

### âœ… å·²å®ç°åŠŸèƒ½

1. **æŒ‡æ ‡æ”¶é›†**
   - å®šæ—¶æ”¶é›†æœåŠ¡å™¨æŒ‡æ ‡ï¼ˆCPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œã€æ¸©åº¦ï¼‰
   - æ¯5ç§’ç”Ÿæˆæ¨¡æ‹ŸæŒ‡æ ‡æ•°æ®
   - æ”¯æŒå†å²æ•°æ®æŸ¥è¯¢

2. **æŠ¥è­¦è§„åˆ™ç®¡ç†**
   - æ”¯æŒå¤šç§æ¯”è¾ƒæ¡ä»¶ï¼ˆå¤§äºã€å°äºã€ç­‰äºï¼‰
   - å¯é…ç½®é˜ˆå€¼å’ŒæŒç»­æ—¶é—´
   - æ”¯æŒä¸åŒä¸¥é‡çº§åˆ«ï¼ˆCRITICALã€WARNINGã€INFOï¼‰
   - å®Œæ•´çš„CRUD API

3. **æŠ¥è­¦è¯„ä¼°**
   - æ¯30ç§’è‡ªåŠ¨è¯„ä¼°æ‰€æœ‰å¯ç”¨çš„æŠ¥è­¦è§„åˆ™
   - æ”¯æŒå¤šç§æŒ‡æ ‡ç±»å‹ï¼ˆcpu_usageã€memory_usageã€disk_usageã€temperatureï¼‰
   - å®æ—¶è§¦å‘æŠ¥è­¦äº‹ä»¶

4. **æŠ¥è­¦é€šçŸ¥**
   - æ§åˆ¶å°è¾“å‡ºæŠ¥è­¦ä¿¡æ¯
   - é‚®ä»¶é€šçŸ¥ï¼ˆå ä½ç¬¦å®ç°ï¼‰
   - æŠ¥è­¦å»é‡æœºåˆ¶ï¼ˆ5åˆ†é’Ÿå†·å´æœŸï¼‰

5. **æ•°æ®ç®¡ç†**
   - è‡ªåŠ¨æ¸…ç†7å¤©å‰çš„å†å²æ•°æ®
   - æŠ¥è­¦äº‹ä»¶è®°å½•å’ŒæŸ¥è¯¢
   - ç»Ÿè®¡ä¿¡æ¯API

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Metrics       â”‚    â”‚   Alert Rules   â”‚    â”‚   Notification  â”‚
â”‚   Collection    â”‚â”€â”€â”€â–ºâ”‚   Evaluation    â”‚â”€â”€â”€â–ºâ”‚   Service       â”‚
â”‚   (æ¯5ç§’)        â”‚    â”‚   (æ¯30ç§’)       â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Server        â”‚    â”‚   Alert         â”‚    â”‚   Console       â”‚
â”‚   Metrics       â”‚    â”‚   Events        â”‚    â”‚   Output        â”‚
â”‚   Database      â”‚    â”‚   Database      â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd backend
mvn spring-boot:run
```

### 2. è¿è¡Œæµ‹è¯•è„šæœ¬

```bash
./test-monitoring-system.sh
```

### 3. æŸ¥çœ‹å®æ—¶æ—¥å¿—

```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
tail -f logs/application.log

# æˆ–è€…æŸ¥çœ‹æ§åˆ¶å°è¾“å‡º
```

## ğŸ“Š API ç«¯ç‚¹

### æœåŠ¡å™¨ç®¡ç†
- `GET /api/servers` - è·å–æ‰€æœ‰æœåŠ¡å™¨
- `GET /api/servers/{id}/metrics/latest` - è·å–æœ€æ–°æŒ‡æ ‡
- `GET /api/servers/{id}/metrics` - è·å–å†å²æŒ‡æ ‡

### æŠ¥è­¦è§„åˆ™ç®¡ç†
- `GET /api/alert-rules` - è·å–æ‰€æœ‰è§„åˆ™
- `POST /api/alert-rules` - åˆ›å»ºæ–°è§„åˆ™
- `PUT /api/alert-rules/{id}` - æ›´æ–°è§„åˆ™
- `DELETE /api/alert-rules/{id}` - åˆ é™¤è§„åˆ™
- `PATCH /api/alert-rules/{id}/status` - å¯ç”¨/ç¦ç”¨è§„åˆ™

### æŠ¥è­¦äº‹ä»¶ç®¡ç†
- `GET /api/alert-events` - è·å–æ‰€æœ‰äº‹ä»¶
- `GET /api/alert-events/active` - è·å–æ´»è·ƒäº‹ä»¶
- `PATCH /api/alert-events/{id}/acknowledge` - ç¡®è®¤äº‹ä»¶
- `PATCH /api/alert-events/{id}/resolve` - è§£å†³äº‹ä»¶

## ğŸ”§ é…ç½®è¯´æ˜

### é»˜è®¤æŠ¥è­¦è§„åˆ™

ç³»ç»Ÿå¯åŠ¨æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºä»¥ä¸‹æµ‹è¯•è§„åˆ™ï¼š

1. **é«˜CPUä½¿ç”¨ç‡** - CPU > 80% (WARNING)
2. **ä¸¥é‡CPUä½¿ç”¨ç‡** - CPU > 95% (CRITICAL)
3. **é«˜å†…å­˜ä½¿ç”¨ç‡** - å†…å­˜ > 85% (WARNING)
4. **é«˜ç£ç›˜ä½¿ç”¨ç‡** - ç£ç›˜ > 90% (CRITICAL)
5. **é«˜æ¸©æŠ¥è­¦** - æ¸©åº¦ > 80Â°C (WARNING)

### è°ƒåº¦å™¨é…ç½®

- **æŒ‡æ ‡æ”¶é›†**: æ¯5ç§’ (`@Scheduled(fixedRate = 5000)`)
- **è§„åˆ™è¯„ä¼°**: æ¯30ç§’ (`@Scheduled(fixedRate = 30000)`)
- **æ•°æ®æ¸…ç†**: æ¯å°æ—¶ (`@Scheduled(fixedRate = 3600000)`)

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### åˆ›å»ºæ–°çš„æŠ¥è­¦è§„åˆ™

```bash
curl -X POST http://localhost:8080/api/alert-rules \
  -H "Content-Type: application/json" \
  -d '{
    "ruleName": "Low Disk Space",
    "description": "Alert when disk usage exceeds 95%",
    "targetMetric": "disk_usage",
    "comparator": "GREATER_THAN",
    "threshold": 95.0,
    "duration": 60,
    "severity": "CRITICAL",
    "enabled": true,
    "scopeLevel": "SERVER",
    "projectId": 1
  }'
```

### æ‰‹åŠ¨è§¦å‘æŒ‡æ ‡ç”Ÿæˆ

```bash
curl -X POST http://localhost:8080/api/servers/metrics/generate
```

### æŸ¥çœ‹æŠ¥è­¦ç»Ÿè®¡

```bash
curl http://localhost:8080/api/alert-events/statistics
```

## ğŸ” ç›‘æ§æŠ¥è­¦æµç¨‹

1. **æ•°æ®æ”¶é›†**: `MetricsDataGenerator` æ¯5ç§’ç”Ÿæˆæ¨¡æ‹ŸæŒ‡æ ‡
2. **è§„åˆ™è¯„ä¼°**: `AlertEvaluationScheduler` æ¯30ç§’è¯„ä¼°è§„åˆ™
3. **æŠ¥è­¦è§¦å‘**: æ»¡è¶³æ¡ä»¶æ—¶åˆ›å»º `AlertEvent`
4. **é€šçŸ¥å‘é€**: `NotificationService` å‘é€æ§åˆ¶å°å’Œé‚®ä»¶é€šçŸ¥
5. **å»é‡å¤„ç†**: 5åˆ†é’Ÿå†…ç›¸åŒæŠ¥è­¦åªå‘é€ä¸€æ¬¡é€šçŸ¥

## ğŸ› ï¸ æ‰©å±•åŠŸèƒ½

### å¾…å®ç°åŠŸèƒ½

1. **çœŸå®æŒ‡æ ‡æ”¶é›†** - é›†æˆOSHIæˆ–Prometheus
2. **é‚®ä»¶é€šçŸ¥** - é›†æˆJavaMail
3. **çŸ­ä¿¡é€šçŸ¥** - é›†æˆé˜¿é‡Œäº‘/è…¾è®¯äº‘SMS
4. **é’‰é’‰/ä¼ä¸šå¾®ä¿¡** - Webhooké€šçŸ¥
5. **æŠ¥è­¦èšåˆ** - æ›´æ™ºèƒ½çš„æŠ¥è­¦åˆ†ç»„
6. **æŠ¥è­¦å‡çº§** - åŸºäºæ—¶é—´çš„å‡çº§ç­–ç•¥
7. **WebSocket** - å®æ—¶å‰ç«¯é€šçŸ¥
8. **Grafanaé›†æˆ** - å¯è§†åŒ–ä»ªè¡¨æ¿

### æŠ€æœ¯æ ˆå»ºè®®

- **æŒ‡æ ‡æ”¶é›†**: Micrometer + Prometheus
- **æ—¶åºæ•°æ®åº“**: InfluxDB/TimescaleDB
- **æ¶ˆæ¯é˜Ÿåˆ—**: RabbitMQ/Apache Kafka
- **ç¼“å­˜**: Redis
- **å‰ç«¯**: React + WebSocket
- **å¯è§†åŒ–**: Grafana + ECharts

## ğŸ“ˆ æ€§èƒ½è€ƒè™‘

- æŒ‡æ ‡æ•°æ®ä¿ç•™7å¤©
- æŠ¥è­¦å»é‡é˜²æ­¢é£æš´
- å¼‚æ­¥é€šçŸ¥å¤„ç†
- æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–
- è¿æ¥æ± é…ç½®

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æŠ¥è­¦ä¸è§¦å‘**: æ£€æŸ¥è§„åˆ™æ˜¯å¦å¯ç”¨ï¼Œé˜ˆå€¼æ˜¯å¦åˆç†
2. **é‡å¤æŠ¥è­¦**: æ£€æŸ¥å»é‡æœºåˆ¶æ˜¯å¦æ­£å¸¸å·¥ä½œ
3. **æŒ‡æ ‡ä¸ºç©º**: æ£€æŸ¥æŒ‡æ ‡ç”Ÿæˆå™¨æ˜¯å¦æ­£å¸¸è¿è¡Œ
4. **APIé”™è¯¯**: æ£€æŸ¥æ•°æ®åº“è¿æ¥å’Œè¡¨ç»“æ„

### æ—¥å¿—çº§åˆ«

```properties
# application.properties
logging.level.com.elec5619.backend.scheduler=INFO
logging.level.com.elec5619.backend.service.NotificationService=INFO
logging.level.com.elec5619.backend.service.impl.AlertSystemServiceImpl=INFO
```

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. åº”ç”¨æ—¥å¿—
2. æ•°æ®åº“è¿æ¥
3. APIå“åº”çŠ¶æ€
4. è°ƒåº¦å™¨è¿è¡ŒçŠ¶æ€

---

**ğŸ‰ æ­å–œï¼æ‚¨å·²ç»æ‹¥æœ‰äº†ä¸€ä¸ªæœ€å°å¯ç”¨çš„ç›‘æ§æŠ¥è­¦ç³»ç»Ÿï¼**
