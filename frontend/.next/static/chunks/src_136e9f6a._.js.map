{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/A_%E5%AD%A6%E4%B9%A0%E6%96%87%E4%BB%B6/5619/ELEC5619-03-Group-1/frontend/src/lib/auth.ts"],"sourcesContent":["// Authentication utilities for JWT token management and permission verification\r\nimport axios from 'axios';\r\n\r\n// API base URL used for frontend-to-backend requests.\r\n// Prefer reading from environment variable NEXT_PUBLIC_API_BASE_URL so you can easily switch between dev/staging/prod.\r\n// Fallback to Spring Boot's common default port (8080) when not provided.\r\n//设置默认请求地址为localhost:8080/api\r\nconst API_BASE_URL = (typeof process !== 'undefined' && process.env.NEXT_PUBLIC_API_BASE_URL)\r\n  ? `${process.env.NEXT_PUBLIC_API_BASE_URL}/api`\r\n  : 'http://localhost:8080/api';\r\n\r\nexport interface User {\r\n  id: string;\r\n  username: string;\r\n  name: string;\r\n  email: string;\r\n  role: 'admin' | 'operator' | 'viewer';\r\n  department?: string;\r\n  permissions: string[];\r\n  avatar?: string;\r\n}\r\n\r\nexport interface AuthState {\r\n  isAuthenticated: boolean;\r\n  user: User | null;\r\n  token: string | null;\r\n}\r\n\r\n// Role-based permissions mapping\r\nexport const ROLE_PERMISSIONS = {\r\n  admin: [\r\n    'user:read', 'user:write', 'user:delete',\r\n    'device:read', 'device:write', 'device:delete',\r\n    'project:read', 'project:write', 'project:delete',\r\n    'service:read', 'service:write', 'service:delete',\r\n    'monitoring:read', 'monitoring:write',\r\n    'alert:read', 'alert:write', 'alert:delete',\r\n    'system:read', 'system:write'\r\n  ],\r\n  operator: [\r\n    'user:read',\r\n    'device:read', 'device:write',\r\n    'project:read', 'project:write',\r\n    'service:read', 'service:write',\r\n    'monitoring:read',\r\n    'alert:read', 'alert:write'\r\n  ],\r\n  viewer: [\r\n    'user:read',\r\n    'device:read',\r\n    'project:read',\r\n    'service:read',\r\n    'monitoring:read',\r\n    'alert:read'\r\n  ]\r\n};\r\n\r\n// Token management\r\nexport class AuthManager {\r\n  private static readonly TOKEN_KEY = 'auth_token';\r\n  private static readonly USER_KEY = 'auth_user';\r\n  private static readonly REFRESH_TOKEN_KEY = 'refresh_token';\r\n\r\n  // Get stored token\r\n  static getToken(): string | null {\r\n    if (typeof window === 'undefined') return null;\r\n    return localStorage.getItem(this.TOKEN_KEY);\r\n  }\r\n\r\n  // Set token\r\n  static setToken(token: string): void {\r\n    if (typeof window === 'undefined') return;\r\n    localStorage.setItem(this.TOKEN_KEY, token);\r\n  }\r\n\r\n  // Remove token\r\n  static removeToken(): void {\r\n    if (typeof window === 'undefined') return;\r\n    localStorage.removeItem(this.TOKEN_KEY);\r\n    localStorage.removeItem(this.USER_KEY);\r\n    localStorage.removeItem(this.REFRESH_TOKEN_KEY);\r\n  }\r\n\r\n  // Get stored user\r\n  static getUser(): User | null {\r\n    if (typeof window === 'undefined') return null;\r\n    const userStr = localStorage.getItem(this.USER_KEY);\r\n    if (!userStr) return null;\r\n    \r\n    try {\r\n      const user = JSON.parse(userStr);\r\n      // Add permissions based on role\r\n      user.permissions = ROLE_PERMISSIONS[user.role as keyof typeof ROLE_PERMISSIONS] || [];\r\n      return user;\r\n    } catch {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // Set user\r\n  static setUser(user: User): void {\r\n    if (typeof window === 'undefined') return;\r\n    localStorage.setItem(this.USER_KEY, JSON.stringify(user));\r\n  }\r\n\r\n  // Check if token is expired\r\n  /**\r\n   * Check if a JWT token is expired.\r\n   * This version is defensive: if the token is not a valid JWT (e.g., a mock token without three parts),\r\n   * it will assume the token is NOT expired to avoid accidental logout in demo mode.\r\n   *\r\n   * Why: Our backend's mock /signin returns \"mock-jwt-token\" for testing, which is not a real JWT,\r\n   * and the previous implementation would treat it as expired immediately.\r\n   */\r\n  static isTokenExpired(token: string): boolean {\r\n    try {\r\n      const parts = token.split('.');\r\n      // If token is not in JWT format (header.payload.signature), treat it as not expired\r\n      if (parts.length !== 3) {\r\n        return false;\r\n      }\r\n      const payload = JSON.parse(atob(parts[1]));\r\n      const currentTime = Date.now() / 1000;\r\n      // If payload.exp exists and is a number, compare with current time; otherwise assume not expired\r\n      return typeof payload.exp === 'number' ? payload.exp < currentTime : false;\r\n    } catch {\r\n      // On any parsing error, assume not expired to keep user logged in\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Check if user is authenticated\r\n  static isAuthenticated(): boolean {\r\n    const token = this.getToken();\r\n    if (!token) return false;\r\n    \r\n    if (this.isTokenExpired(token)) {\r\n      this.removeToken();\r\n      return false;\r\n    }\r\n    \r\n    return true;\r\n  }\r\n\r\n  // Get current auth state\r\n  static getAuthState(): AuthState {\r\n    const token = this.getToken();\r\n    const user = this.getUser();\r\n    const isAuthenticated = this.isAuthenticated();\r\n    \r\n    return {\r\n      isAuthenticated,\r\n      user: isAuthenticated ? user : null,\r\n      token: isAuthenticated ? token : null\r\n    };\r\n  }\r\n\r\n  // Login\r\n  /**\r\n   * Perform login by calling backend API and storing JWT + user info locally.\r\n   *\r\n   * Flow:\r\n   * 1) Try POST `${API_BASE_URL}/auth/signin` with { username, password }.\r\n   *    - Expected response (JwtResponseDto): { token, type, id, username, email, roles }\r\n   *    - Save token to localStorage; map backend roles (e.g., ROLE_ADMIN/ROLE_OPERATOR/ROLE_USER)\r\n   *      to our app roles ('admin' | 'operator' | 'viewer') and assign permissions.\r\n   * 2) If /auth/signin fails (e.g., backend not ready), fall back to POST `${API_BASE_URL}/auth/login`.\r\n   *    - This endpoint returns a simple success flag. We'll store a mock token and basic user info so\r\n   *      the rest of the app can run for demo/testing.\r\n   *\r\n   * Returns: { success, message, user? }\r\n   */\r\n  static async login(username: string, password: string): Promise<{ success: boolean; message: string; user?: User }> {\r\n    try {\r\n      // Attempt real signin endpoint first\r\n      //使用axios发送POST请求 \r\n      const res = await axios.post(`${API_BASE_URL}/auth/signin`, {\r\n        username,\r\n        password\r\n      }, {\r\n        headers: { 'Content-Type': 'application/json' }\r\n      });\r\n\r\n      const data: any = res.data || {};\r\n      const token: string | undefined = data.token;\r\n\r\n      // 2.1) 如果后端没有返回 token，视为失败并给出清晰的提示（这在联调早期很常见）\r\n      if (!token) {\r\n        return { success: false, message: 'Login failed: token is missing in server response.' };\r\n      }\r\n\r\n      // 2.2) 角色数组（如 [\"ROLE_USER\", \"ROLE_ADMIN\"]），用于前端权限映射\r\n      const roles: string[] = Array.isArray(data.roles) ? data.roles : [];\r\n\r\n      // Map backend roles to frontend roles used in our app\r\n      const mappedRole: 'admin' | 'operator' | 'viewer' =\r\n        roles.includes('ROLE_ADMIN') ? 'admin' :\r\n        roles.includes('ROLE_OPERATOR') ? 'operator' :\r\n        'viewer';\r\n\r\n      const user: User = {\r\n        id: String(data.id ?? '1'),\r\n        username: data.username ?? username,\r\n        name: data.username ?? username,\r\n        email: data.email ?? `${username}@example.com`,\r\n        role: mappedRole,\r\n        permissions: ROLE_PERMISSIONS[mappedRole]\r\n      };\r\n\r\n      // Persist token and user\r\n      this.setToken(token);\r\n      this.setUser(user);\r\n\r\n      return { success: true, message: 'Login successful', user };\r\n    } catch (error: any) {\r\n      // 捕获失败并尽可能提取后端返回的详细错误信息\r\n      // error.response：后端有响应（例如 400/401/500 等）\r\n      // error.request：请求发出但未收到响应（网络/跨域/后端未启动）\r\n      // error.message：Axios/JS 层面的错误消息\r\n      let detailedMessage = 'Login failed. Please check your credentials or server status.';\r\n\r\n      if (error?.response) {\r\n        const status: number = error.response.status;\r\n        const data = error.response.data;\r\n\r\n        // 尝试从后端响应体中提取错误信息字段\r\n        const serverMsg = typeof data === 'string'\r\n          ? data\r\n          : (data?.message || data?.error || data?.detail || '');\r\n\r\n        if (status === 401) {\r\n          detailedMessage = serverMsg || 'Invalid username or password.';\r\n        } else if (status === 400) {\r\n          detailedMessage = serverMsg || 'Bad request. Please verify the input format.';\r\n        } else if (status >= 500) {\r\n          detailedMessage = serverMsg || 'Server error. Please try again later.';\r\n        } else {\r\n          detailedMessage = serverMsg || `Request failed with status ${status}.`;\r\n        }\r\n      } else if (error?.request) {\r\n        // 请求已发出但没有收到响应（大多是网络问题或后端未启动/地址不对）\r\n        detailedMessage = 'Unable to reach the server. Please confirm the backend is running and NEXT_PUBLIC_API_BASE_URL is correct.';\r\n      } else if (error?.message) {\r\n        // 其他 Axios/JS 层面错误\r\n        detailedMessage = error.message;\r\n      }\r\n\r\n      return { success: false, message: detailedMessage };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Register a new user by calling the backend signup API.\r\n   *\r\n   * What it does:\r\n   * - Sends a POST request to `${API_BASE_URL}/auth/signup` with { username, email, password }.\r\n   * - Expects the backend to return a `UserResponseDto` (id, username, email, roles, ...).\r\n   * - Maps backend roles (e.g., ROLE_ADMIN/ROLE_OPERATOR/ROLE_USER) to our app roles\r\n   *   ('admin' | 'operator' | 'viewer'), and prepares a `User` object for UI feedback.\r\n   * - Does NOT log the user in automatically; the caller should redirect to the login page.\r\n   *\r\n   * Error handling:\r\n   * - Provides detailed error messages based on HTTP status codes and server response body.\r\n   * - Common cases: 400 (validation), 409 (conflict), 500 (server errors).\r\n   *\r\n   * Returns: { success, message, user? }\r\n   */\r\n  static async register(payload: { username: string; email: string; password: string; roles?: string[] }): Promise<{ success: boolean; message: string; user?: User }> {\r\n    try {\r\n      const res = await axios.post(`${API_BASE_URL}/auth/signup`, payload, {\r\n        headers: { 'Content-Type': 'application/json' }\r\n      });\r\n\r\n      const data: any = res.data || {};\r\n      const rolesFromServer: string[] = Array.isArray(data.roles) ? data.roles : [];\r\n\r\n      const mappedRole: 'admin' | 'operator' | 'viewer' =\r\n        rolesFromServer.includes('ROLE_ADMIN') ? 'admin' :\r\n        rolesFromServer.includes('ROLE_OPERATOR') ? 'operator' :\r\n        'viewer';\r\n\r\n      const user: User = {\r\n        id: String(data.id ?? ''),\r\n        username: data.username ?? payload.username,\r\n        name: data.username ?? payload.username,\r\n        email: data.email ?? payload.email,\r\n        role: mappedRole,\r\n        permissions: ROLE_PERMISSIONS[mappedRole]\r\n      };\r\n\r\n      // 这里不进行自动登录，也不保存 token；注册后通常需要用户主动登录\r\n      return { success: true, message: 'Registration successful! Please sign in.', user };\r\n    } catch (error: any) {\r\n      let detailedMessage = 'Registration failed. Please try again later.';\r\n\r\n      if (error?.response) {\r\n        const status: number = error.response.status;\r\n        const data = error.response.data;\r\n        const serverMsg = typeof data === 'string'\r\n          ? data\r\n          : (data?.message || data?.error || data?.detail || '');\r\n\r\n        if (status === 400) {\r\n          detailedMessage = serverMsg || 'Invalid input. Please check your username, email, and password.';\r\n        // } else if (status === 409) {\r\n        //   detailedMessage = serverMsg || 'User already exists. Try a different username or email.';\r\n        // } else if (status >= 500) {\r\n        //   detailedMessage = serverMsg || 'Server error. Please try again later.';\r\n        // } \r\n        }else {\r\n          detailedMessage = serverMsg || `Request failed with status ${status}.`;\r\n        }\r\n      } else if (error?.request) {\r\n        detailedMessage = 'Unable to reach the server. Please ensure the backend is running on the correct URL.';\r\n      } else if (error?.message) {\r\n        detailedMessage = error.message;\r\n      }\r\n\r\n      return { success: false, message: detailedMessage };\r\n    }\r\n  }\r\n\r\n  // Logout\r\n  static logout(): void {\r\n    this.removeToken();\r\n    // Redirect to login page\r\n    if (typeof window !== 'undefined') {\r\n      window.location.href = '/auth/login';\r\n    }\r\n  }\r\n\r\n  // Generate mock JWT token\r\n  private static generateMockToken(role: string): string {\r\n    const header = btoa(JSON.stringify({ alg: 'HS256', typ: 'JWT' }));\r\n    const payload = btoa(JSON.stringify({\r\n      sub: role === 'admin' ? '1' : '2',\r\n      name: role === 'admin' ? 'Administrator' : 'System Operator',\r\n      role: role,\r\n      iat: Math.floor(Date.now() / 1000),\r\n      exp: Math.floor(Date.now() / 1000) + (24 * 60 * 60) // 24 hours\r\n    }));\r\n    const signature = btoa('mock-signature');\r\n    \r\n    return `${header}.${payload}.${signature}`;\r\n  }\r\n}\r\n\r\n// Permission checking utilities\r\nexport class PermissionManager {\r\n  // Check if user has specific permission\r\n  static hasPermission(permission: string, user?: User | null): boolean {\r\n    if (!user) {\r\n      const currentUser = AuthManager.getUser();\r\n      if (!currentUser) return false;\r\n      user = currentUser;\r\n    }\r\n    \r\n    return user.permissions.includes(permission);\r\n  }\r\n\r\n  // Check if user has any of the specified permissions\r\n  static hasAnyPermission(permissions: string[], user?: User | null): boolean {\r\n    return permissions.some(permission => this.hasPermission(permission, user));\r\n  }\r\n\r\n  // Check if user has all specified permissions\r\n  static hasAllPermissions(permissions: string[], user?: User | null): boolean {\r\n    return permissions.every(permission => this.hasPermission(permission, user));\r\n  }\r\n\r\n  // Check if user has specific role\r\n  static hasRole(role: string, user?: User | null): boolean {\r\n    if (!user) {\r\n      const currentUser = AuthManager.getUser();\r\n      if (!currentUser) return false;\r\n      user = currentUser;\r\n    }\r\n    \r\n    return user.role === role;\r\n  }\r\n\r\n  // Check if user has minimum role level\r\n  static hasMinimumRole(minRole: 'viewer' | 'operator' | 'admin', user?: User | null): boolean {\r\n    if (!user) {\r\n      const currentUser = AuthManager.getUser();\r\n      if (!currentUser) return false;\r\n      user = currentUser;\r\n    }\r\n    \r\n    const roleHierarchy = { viewer: 1, operator: 2, admin: 3 };\r\n    const userLevel = roleHierarchy[user.role];\r\n    const minLevel = roleHierarchy[minRole];\r\n    \r\n    return userLevel >= minLevel;\r\n  }\r\n}\r\n\r\n// Route protection utilities\r\nexport const requireAuth = () => {\r\n  if (typeof window === 'undefined') return true;\r\n  \r\n  if (!AuthManager.isAuthenticated()) {\r\n    window.location.href = '/auth/login';\r\n    return false;\r\n  }\r\n  \r\n  return true;\r\n};\r\n\r\nexport const requirePermission = (permission: string) => {\r\n  if (!requireAuth()) return false;\r\n  \r\n  if (!PermissionManager.hasPermission(permission)) {\r\n    // Redirect to unauthorized page or show error\r\n    console.error(`Access denied: Missing permission '${permission}'`);\r\n    return false;\r\n  }\r\n  \r\n  return true;\r\n};\r\n\r\nexport const requireRole = (role: string) => {\r\n  if (!requireAuth()) return false;\r\n  \r\n  if (!PermissionManager.hasRole(role)) {\r\n    console.error(`Access denied: Required role '${role}'`);\r\n    return false;\r\n  }\r\n  \r\n  return true;\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 420, "column": 0}, "map": {"version":3,"sources":["file:///D:/A_%E5%AD%A6%E4%B9%A0%E6%96%87%E4%BB%B6/5619/ELEC5619-03-Group-1/frontend/src/components/Authentication/RegisterForm.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { Form, Input, Button, Card, Modal, Select, Divider, message } from 'antd';\r\nimport { UserOutlined, LockOutlined, MailOutlined, EyeInvisibleOutlined, EyeTwoTone, TeamOutlined } from '@ant-design/icons';\r\nimport Link from 'next/link';\r\nimport { AuthManager } from '@/lib/auth';\r\n\r\nconst { Option } = Select;\r\n\r\ninterface RegisterFormData {\r\n  username: string;\r\n  email: string;\r\n  password: string;\r\n  confirmPassword: string;\r\n  fullName: string;\r\n  department: string;\r\n  role: string;\r\n}\r\n\r\ninterface RegisterFormProps {\r\n  onRegister?: (data: RegisterFormData) => void;\r\n  loading?: boolean;\r\n}\r\n\r\nconst RegisterForm: React.FC<RegisterFormProps> = ({ onRegister, loading = false }) => {\r\n  const [form] = Form.useForm();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  // 使用 antd v5 的 useMessage，在组件树中提供上下文，确保提示在所有环境下可见\r\n  const [messageApi, contextHolder] = message.useMessage();\r\n\r\n  /**\r\n   * 处理注册提交逻辑（成功时不弹窗）：\r\n   * - 成功：使用 antd 的 message 成功提示，然后自动跳转到登录页面（延时 1.2s，便于用户看到提示）\r\n   * - 失败：保留 Modal.error 弹窗，清晰展示错误信息\r\n   */\r\n  const handleSubmit = async (values: RegisterFormData) => {\r\n    setIsLoading(true);\r\n    try {\r\n      // 准备后端需要的精简字段：username、email、password（后端会设置默认角色）\r\n      const payload = {\r\n        username: values.username,\r\n        email: values.email,\r\n        password: values.password,\r\n      };\r\n  \r\n      // 调用统一的认证管理器，发起后端注册请求\r\n      const result = await AuthManager.register(payload);\r\n  \r\n      if (result.success) {\r\n        console.log(\"success!!register\");\r\n        // 如果父组件传入了 onRegister（例如用于埋点或额外处理），在此安全调用\r\n        if (onRegister) {\r\n          try {\r\n            onRegister(values);\r\n          } catch (e) {\r\n            console.error('onRegister callback error:', e);\r\n          }\r\n        }\r\n        // 成功后仅使用轻提示，然后自动跳转到登录页\r\n        messageApi.success(result.message || 'Registration successful! Please sign in.');\r\n        setTimeout(() => {\r\n          window.location.href = '/auth/login';\r\n        }, 2000);\r\n      } else {\r\n        // 使用 Modal 弹窗展示后端返回的错误信息，帮助用户理解失败原因\r\n        Modal.error({\r\n          title: 'Registration Failed',\r\n          content: result.message || 'Registration failed. Please try again.',\r\n          okText: 'OK',\r\n        });\r\n      }\r\n    } catch (error) {\r\n      // 兜底的异常捕获，使用弹窗避免错误信息被忽略\r\n      Modal.error({\r\n        title: 'Registration Failed',\r\n        content: 'Registration failed. Please try again.',\r\n        okText: 'OK',\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const validatePassword = (_: any, value: string) => {\r\n    if (!value) {\r\n      return Promise.reject(new Error('Please input your password!'));\r\n    }\r\n    if (value.length < 8) {\r\n      return Promise.reject(new Error('Password must be at least 8 characters!'));\r\n    }\r\n    if (!/(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)/.test(value)) {\r\n      return Promise.reject(new Error('Password must contain uppercase, lowercase and number!'));\r\n    }\r\n    return Promise.resolve();\r\n  };\r\n\r\n  const validateConfirmPassword = (_: any, value: string) => {\r\n    if (!value) {\r\n      return Promise.reject(new Error('Please confirm your password!'));\r\n    }\r\n    if (value !== form.getFieldValue('password')) {\r\n      return Promise.reject(new Error('Passwords do not match!'));\r\n    }\r\n    return Promise.resolve();\r\n  };\r\n\r\n  return (\r\n    <div style={{ \r\n      minHeight: '100vh', \r\n      display: 'flex', \r\n      alignItems: 'center', \r\n      justifyContent: 'center',\r\n      background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n      padding: '20px'\r\n    }}>\r\n      {contextHolder}\r\n      <Card \r\n        style={{ \r\n          width: 500, \r\n          boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\r\n          borderRadius: '8px'\r\n        }}\r\n        // Ant Design v5+: `bodyStyle` is deprecated. Use the new `styles.body` API instead to style the Card body.\r\n        styles={{ body: { padding: '32px' } }}\r\n        // Ant Design v5+: `bordered` 已弃用，使用新的 `variant` 属性\r\n        // `variant=\"borderless\"` 等价于旧的 bordered={false}\r\n        variant=\"borderless\"\r\n      >\r\n        <div style={{ textAlign: 'center', marginBottom: '24px' }}>\r\n          <h1 style={{ \r\n            fontSize: '24px', \r\n            fontWeight: 'bold', \r\n            color: '#1890ff',\r\n            margin: 0\r\n          }}>\r\n            Create Account\r\n          </h1>\r\n          <p style={{ color: '#666', marginTop: '8px' }}>Join the Host Management System</p>\r\n        </div>\r\n\r\n        <Form\r\n          form={form}\r\n          name=\"register\"\r\n          onFinish={handleSubmit}\r\n          autoComplete=\"off\"\r\n          size=\"large\"\r\n          layout=\"vertical\"\r\n        >\r\n          <Form.Item\r\n            label=\"Full Name\"\r\n            name=\"fullName\"\r\n            rules={[\r\n              { required: true, message: 'Please input your full name!' },\r\n              { min: 2, message: 'Name must be at least 2 characters!' }\r\n            ]}\r\n          >\r\n            <Input \r\n              prefix={<UserOutlined />} \r\n              placeholder=\"Enter your full name\" \r\n            />\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            label=\"Username\"\r\n            name=\"username\"\r\n            rules={[\r\n              { required: true, message: 'Please input your username!' },\r\n              { min: 3, message: 'Username must be at least 3 characters!' },\r\n              { pattern: /^[a-zA-Z0-9_]+$/, message: 'Username can only contain letters, numbers and underscore!' }\r\n            ]}\r\n          >\r\n            <Input \r\n              prefix={<UserOutlined />} \r\n              placeholder=\"Choose a username\" \r\n            />\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            label=\"Email\"\r\n            name=\"email\"\r\n            rules={[\r\n              { required: true, message: 'Please input your email!' },\r\n              { type: 'email', message: 'Please enter a valid email address!' }\r\n            ]}\r\n          >\r\n            <Input \r\n              prefix={<MailOutlined />} \r\n              placeholder=\"Enter your email address\" \r\n            />\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            label=\"Department\"\r\n            name=\"department\"\r\n            rules={[\r\n              { required: true, message: 'Please select your department!' }\r\n            ]}\r\n          >\r\n            <Select \r\n              placeholder=\"Select your department\"\r\n              suffixIcon={<TeamOutlined />}\r\n            >\r\n              <Option value=\"engineering\">Engineering</Option>\r\n              <Option value=\"operations\">Operations</Option>\r\n              <Option value=\"security\">Security</Option>\r\n              <Option value=\"management\">Management</Option>\r\n              <Option value=\"support\">Support</Option>\r\n              <Option value=\"other\">Other</Option>\r\n            </Select>\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            label=\"Requested Role\"\r\n            name=\"role\"\r\n            rules={[\r\n              { required: true, message: 'Please select a role!' }\r\n            ]}\r\n          >\r\n            <Select placeholder=\"Select requested role\">\r\n              <Option value=\"viewer\">Viewer - Read-only access</Option>\r\n              <Option value=\"operator\">Operator - Basic operations</Option>\r\n              <Option value=\"admin\">Administrator - Full access</Option>\r\n            </Select>\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            label=\"Password\"\r\n            name=\"password\"\r\n            rules={[{ validator: validatePassword }]}\r\n          >\r\n            <Input.Password\r\n              prefix={<LockOutlined />}\r\n              placeholder=\"Create a strong password\"\r\n              iconRender={(visible) => (visible ? <EyeTwoTone /> : <EyeInvisibleOutlined />)}\r\n            />\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            label=\"Confirm Password\"\r\n            name=\"confirmPassword\"\r\n            rules={[{ validator: validateConfirmPassword }]}\r\n          >\r\n            <Input.Password\r\n              prefix={<LockOutlined />}\r\n              placeholder=\"Confirm your password\"\r\n              iconRender={(visible) => (visible ? <EyeTwoTone /> : <EyeInvisibleOutlined />)}\r\n            />\r\n          </Form.Item>\r\n\r\n          <Form.Item>\r\n            <Button \r\n              type=\"primary\" \r\n              htmlType=\"submit\" \r\n              loading={isLoading || loading}\r\n              style={{ width: '100%', height: '40px' }}\r\n            >\r\n              Create Account\r\n            </Button>\r\n          </Form.Item>\r\n\r\n          <Divider>Or</Divider>\r\n\r\n          <div style={{ textAlign: 'center' }}>\r\n            <span style={{ color: '#666' }}>Already have an account? </span>\r\n            <Link href=\"/auth/login\" style={{ color: '#1890ff', fontWeight: 'medium' }}>\r\n              Sign in here\r\n            </Link>\r\n          </div>\r\n        </Form>\r\n\r\n        <div style={{ marginTop: '24px', padding: '12px', backgroundColor: '#f6f8fa', borderRadius: '4px' }}>\r\n          <p style={{ fontSize: '12px', color: '#666', margin: 0, textAlign: 'center' }}>\r\n            <strong>Note:</strong> Your account will be reviewed by an administrator before activation.\r\n          </p>\r\n        </div>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RegisterForm;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1014, "column": 0}, "map": {"version":3,"sources":["file:///D:/A_%E5%AD%A6%E4%B9%A0%E6%96%87%E4%BB%B6/5619/ELEC5619-03-Group-1/frontend/src/app/auth/register/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { Card, Row, Col } from 'antd';\r\nimport { AuthManager } from '@/lib/auth';\r\nimport RegisterForm from '@/components/Authentication/RegisterForm';\r\n\r\nconst RegisterPage: React.FC = () => {\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    // Redirect if already authenticated\r\n    if (AuthManager.isAuthenticated()) {\r\n      router.push('/');\r\n    }\r\n  }, [router]);\r\n\r\n  return (\r\n    <div style={{\r\n      minHeight: '100vh',\r\n      background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      padding: '20px'\r\n    }}>\r\n      <Row justify=\"center\" style={{ width: '100%' }}>\r\n        <Col xs={24} sm={20} md={16} lg={12} xl={10}>\r\n          <Card\r\n            style={{\r\n              boxShadow: '0 8px 32px rgba(0, 0, 0, 0.1)',\r\n              borderRadius: '12px',\r\n              border: 'none'\r\n            }}\r\n            // Ant Design v5+: `bodyStyle` is deprecated. Use the new `styles.body` API instead to style the Card body.\r\n            styles={{ body: { padding: '40px' } }}\r\n            bordered={false}\r\n          >\r\n            <div style={{ textAlign: 'center', marginBottom: '30px' }}>\r\n              <h1 style={{ \r\n                fontSize: '28px', \r\n                fontWeight: 'bold', \r\n                color: '#1f2937',\r\n                marginBottom: '8px'\r\n              }}>\r\n                Create Account\r\n              </h1>\r\n              <p style={{ \r\n                color: '#6b7280', \r\n                fontSize: '16px',\r\n                margin: 0\r\n              }}>\r\n                Join the Host Management System\r\n              </p>\r\n            </div>\r\n            \r\n            <RegisterForm />\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RegisterPage;"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;;;AANA;;;;;;AAQA,MAAM,eAAyB;;IAC7B,MAAM,SAAS,IAAA,kJAAS;IAExB,IAAA,0KAAS;kCAAC;YACR,oCAAoC;YACpC,IAAI,oIAAW,CAAC,eAAe,IAAI;gBACjC,OAAO,IAAI,CAAC;YACd;QACF;iCAAG;QAAC;KAAO;IAEX,qBACE,6LAAC;QAAI,OAAO;YACV,WAAW;YACX,YAAY;YACZ,SAAS;YACT,YAAY;YACZ,gBAAgB;YAChB,SAAS;QACX;kBACE,cAAA,6LAAC,sLAAG;YAAC,SAAQ;YAAS,OAAO;gBAAE,OAAO;YAAO;sBAC3C,cAAA,6LAAC,sLAAG;gBAAC,IAAI;gBAAI,IAAI;gBAAI,IAAI;gBAAI,IAAI;gBAAI,IAAI;0BACvC,cAAA,6LAAC,yLAAI;oBACH,OAAO;wBACL,WAAW;wBACX,cAAc;wBACd,QAAQ;oBACV;oBACA,2GAA2G;oBAC3G,QAAQ;wBAAE,MAAM;4BAAE,SAAS;wBAAO;oBAAE;oBACpC,UAAU;;sCAEV,6LAAC;4BAAI,OAAO;gCAAE,WAAW;gCAAU,cAAc;4BAAO;;8CACtD,6LAAC;oCAAG,OAAO;wCACT,UAAU;wCACV,YAAY;wCACZ,OAAO;wCACP,cAAc;oCAChB;8CAAG;;;;;;8CAGH,6LAAC;oCAAE,OAAO;wCACR,OAAO;wCACP,UAAU;wCACV,QAAQ;oCACV;8CAAG;;;;;;;;;;;;sCAKL,6LAAC,kKAAY;;;;;;;;;;;;;;;;;;;;;;;;;;AAMzB;GAvDM;;QACW,kJAAS;;;KADpB;uCAyDS","debugId":null}}]
}